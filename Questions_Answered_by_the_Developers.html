<!DOCTYPE html><html lang="zh-CN" dir="ltr"><head><meta charset="UTF-8"><title>开发者解答的问题 - 3D坦克维基</title><meta charset="UTF-8">
    <script async="" src="https://mc.yandex.ru/metrika/tag.js"></script>
    <script async="" src="https://mc.yandex.ru/metrika/tag.js"></script>
    <script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"0e874ac717aff2cc19e53e1c","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Questions_Answered_by_the_Developers","wgTitle":"Questions Answered by the Developers","wgCurRevisionId":65617,"wgRevisionId":65617,"wgArticleId":15105,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageViewLanguage":"en","wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Questions_Answered_by_the_Developers","wgRelevantArticleId":15105,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgEditSubmitButtonLabelPublish":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","jquery.tablesorter.styles":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","skins.tankiblue.responsive":"ready","mediawiki.skinning.interface":"ready","skins.tankiblue":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","jquery.tablesorter","ext.gadget.UTCLiveClock","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","skins.tankiblue.js","ext.purge"];</script>
    <script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
    <link rel="stylesheet" href="https://en.tankiwiki.com/load.php?lang=en&amp;modules=ext.visualEditor.desktopArticleTarget.noscript%7Cjquery.tablesorter.styles%7Cmediawiki.skinning.interface%7Cskins.tankiblue%7Cskins.tankiblue.responsive&amp;only=styles&amp;skin=tankiblue">
    <script async="" src="https://en.tankiwiki.com/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=tankiblue"></script>
    <style>
.mw-editfont-monospace{font-family:monospace,monospace}.mw-editfont-sans-serif{font-family:sans-serif}.mw-editfont-serif{font-family:serif} .mw-editfont-monospace,.mw-editfont-sans-serif,.mw-editfont-serif{  font-size:13px;  -moz-tab-size:4; tab-size:4; }.mw-editfont-monospace.oo-ui-textInputWidget,.mw-editfont-sans-serif.oo-ui-textInputWidget,.mw-editfont-serif.oo-ui-textInputWidget{font-size:inherit}.mw-editfont-monospace.oo-ui-textInputWidget > .oo-ui-inputWidget-input,.mw-editfont-sans-serif.oo-ui-textInputWidget > .oo-ui-inputWidget-input,.mw-editfont-serif.oo-ui-textInputWidget > .oo-ui-inputWidget-input{  font-size:13px}.mw-editfont-monospace.oo-ui-textInputWidget > input.oo-ui-inputWidget-input,.mw-editfont-sans-serif.oo-ui-textInputWidget > input.oo-ui-inputWidget-input,.mw-editfont-serif.oo-ui-textInputWidget > input.oo-ui-inputWidget-input{min-height:32px}
.ve-init-mw-progressBarWidget{height:1em;overflow:hidden;margin:0 25%}.ve-init-mw-progressBarWidget-bar{height:1em;width:0} .ve-init-mw-progressBarWidget{background-color:#fff;box-sizing:border-box;height:0.875em;border:1px solid #36c;border-radius:0.875em;box-shadow:0 1px 1px rgba(0,0,0,0.15)}.ve-init-mw-progressBarWidget-bar{background-color:#36c;height:0.875em}
#mw-teleport-target{position:absolute;z-index:450}</style>
    <style>
.ve-init-mw-tempWikitextEditorWidget{border:0;padding:0;color:inherit;line-height:1.5em;width:100%;-moz-tab-size:4;tab-size:4; }.ve-init-mw-tempWikitextEditorWidget:focus{outline:0;padding:0}.ve-init-mw-tempWikitextEditorWidget::selection{background:rgba(109,169,247,0.5); }</style>
    <meta name="ResourceLoaderDynamicStyles" content="">
    <link rel="stylesheet" href="https://en.tankiwiki.com/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=tankiblue">
    <meta name="generator" content="MediaWiki 1.42.3">
    <meta name="robots" content="max-image-preview:standard">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://en.tankiwiki.com/favicon.png">
    <link rel="search" type="application/opensearchdescription+xml" href="https://en.tankiwiki.com/opensearch_desc.php" title="Tanki Online Wiki (en)">
    <link rel="EditURI" type="application/rsd+xml" href="https://en.tankiwiki.com/api.php?action=rsd">
    <link rel="alternate" type="application/atom+xml" title="Tanki Online Wiki Atom feed" href="https://en.tankiwiki.com/index.php?title=Special:RecentChanges&amp;feed=atom">
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <style>#utcdate a { font-weight:bolder; font-size:120%; }</style><style>@import url('https://fonts.googleapis.com/css2?family=M+PLUS+1p&family=Rubik&display=swap');body{font-family:'Rubik','M PLUS 1p',sans-serif;background-color:#001926 !important;}#mw-main-container{max-width:1200px;margin:20px auto;background-color:#001926;padding:20px;}</style></head><body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Questions_Answered_by_the_Developers rootpage-Questions_Answered_by_the_Developers skin-tankiblue action-view"><div id="mw-main-container"><a href="./Tanki_Online_Wiki" style="display: inline-block; margin: 0 0 25px 0; padding: 12px 24px; background-color: #BFD5FF; color: #001926; text-decoration: none; font-weight: bold; border-radius: 8px; font-family: 'Rubik', 'M PLUS 1p', sans-serif; transition: background-color 0.3s ease, transform 0.2s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onmouseover="this.style.backgroundColor='#a8c0e0'; this.style.transform='scale(1.03)';" onmouseout="this.style.backgroundColor='#BFD5FF'; this.style.transform='scale(1)';">返回主页</a><div class="main-content"><div class="mw-body ve-init-mw-desktopArticleTarget-targetContainer" id="content" role="main"><a id="top"></a><div class="mw-body-content" id="bodyContent"><div id="siteNotice"></div><div id="mw-content-text" class="mw-content-ltr mw-parser-output" lang="zh-CN" dir="ltr"><h1 id="firstHeading" class="firstHeading" lang=""><span class="mw-page-title-main">开发人员解答的问题</span></h1><table class="wikitable sortable jquery-tablesorter" style="width:100%">
<thead><tr>
<th class="headerSort" tabindex="0" role="columnheader button" title="升序排列">身份证</th>
<th class="headerSort" tabindex="0" role="columnheader button" title="升序排列">问题</th>
<th class="headerSort" tabindex="0" role="columnheader button" title="升序排序">回答</th></tr></thead><tbody>
<tr>
<td>45</td>
<td>Steam 版本发生了什么事？</td>
<td>所以，大家，我们很快会更新 Steam 版本，我们将用游戏的 HTML5 版本替换平台上的 Flash 版本。随着这一变动，Flash 版本将最终被完全停用。即使你找到某种方式进入 Flash 版本，在下一次重大更新后，它也将无法再使用。这意味着我们的游戏在所有平台上都将是 HTML5 版本，这让我们可以专注于改进 HTML5 版本并为你带来更多精彩的更新。你们已经看到其中之一——新的界面。我们很快就会发布它。<p><br>
</p>
</td></tr>
<tr>
<td>46</td>
<td>你会在匹配系统中添加更多地图吗？</td>
<td>我们希望您能理解，您连续三次出现在同一张地图上的情况，可能与匹配地图池的大小无关。目前，我们已经有足够的地图，并不需要向匹配的地图池中增加更多地图。相反，我们需要修复系统选择地图的方式。<p><br>
</p>
</td></tr>
<tr>
<td>47</td>
<td>你会把地图的夜晚主题带回匹配系统吗？</td>
<td>让我告诉你为什么我们现在没有它们：如果我没弄错的话，我们以前在匹配中是有的。之前我们有它们的时候，只有游戏的 Flash 版本。Flash 版本的光照系统不同。Flash 中的每个投射物周围都有一个发光效果，会照亮投射物周围的物体。在白天，这几乎看不见。但在地图的夜晚主题下，你可以很容易看到它，而且看起来非常漂亮。你可能还记得节日圣诞地图在夜晚模式下有多亮。直到我们让 HTML5 版本的光照像 Flash 版本那样工作（我们计划这样做），我们不会把匹配的地图夜晚主题带回来，因为这样会太暗且难以玩。<p><br>
</p>
</td></tr>
<tr>
<td>48</td>
<td>你打算把无人机加到幸运礼盒里吗？</td>
<td>我们实际上有计划向幸运礼盒中添加一些新内容。不是无人机，而是其他东西。但这是个好主意，也许以后会考虑……目前，我们正在考虑更新幸运礼盒，当前的计划是向其中添加 Mk1 装备。炮塔和底盘……也许是无人机……也许是防护模块……你可能会问：为什么？原因是我们希望让新玩家更容易上手。所以当他们进入游戏时，不会面对一大堆不知道怎么使用的物品和炮塔，而是会从幸运礼盒中逐一获得它们，在收到新的炮塔或底盘时感到开心。但就目前而言，这些只是我们的计划。<p><br>
</p>
</td></tr>
<tr>
<td>49</td>
<td>你是否理解，通过使无人机升级和道具互相依赖，你迫使玩家必须使用升级程度最高的无人机？</td>
<td>我们完全理解这对新玩家在使用无人机方面设定了一些限制。我们特别为新玩家设定这些限制。新玩家最初有简单的“布鲁特斯”无人机可用。它不消耗电池，并能对道具提供被动加成，而其他无人机由于其不同的机制，带来了更多的机会和策略。因此，使用这些无人机装备会更难。如今获取水晶并不是那么难。所以，通过升级和获得更多水晶，你可以在具备足够能力使用它们时解锁并购买这些无人机。<p><br>
</p>
</td></tr>
<tr>
<td>50</td>
<td>你打算什么时候更新图形？</td>
<td>让我们在问答环节把这个问题设置为普通栏目 :)<p><br>
</p>
</td></tr>
<tr>
<td>51</td>
<td>你什么时候会恢复使用游戏手柄玩3D坦克的选项？</td>
<td>但是我们……甚至还没添加它……所以当我们添加它时，我们会移除它……然后再带回来……<p><br>
</p>
</td></tr>
<tr>
<td>52</td>
<td>你打算更新天空和建筑的外观吗？</td>
<td>好，欢迎回到我们的普通专栏“你什么时候更新图形？”亲爱的玩家……看起来……更新图形是不可避免的……<p><br>
</p>
</td></tr>
<tr>
<td>53</td>
<td>你们会添加黄蜂轻甲/蜂王 + 火焰炮模式吗？</td>
<td>不。<p><br>
</p>
</td></tr>
<tr>
<td>54</td>
<td>你打算什么时候让在 HTML5 中跑酷成为可能？</td>
<td>我们不会改变游戏物理的运作方式。我们已经意识到这个问题（例如，在飞行时你的坦克可能会突然停下并掉下去），但目前我们不会解决它。为什么？还有另一个问题：虽然有可能解决它。当你尝试跳跃时，你会利用炮塔发射的冲击力。而在 HTML5 中，爆炸的冲击力比 Flash 版本小得多。我们可以增加这个参数的数值，但如你所记得，Flash 版本仍然在运行，这可能会对仍在使用 Flash 的玩家产生不利影响，因为冲击力会在那里被夸大。因此，当我们最终禁用 Flash 版本时，我们才能对其进行处理。<p><br>
</p>
</td></tr>
<tr>
<td>55</td>
<td>按下 R 或 V 键时，是否可以在另一辆坦克的昵称上方看到装备改造和防护模块被装备的情况？</td>
<td>不，我们不会添加此功能。你也可以通过查看TAB窗口找到这些信息，该窗口已经在战斗中坦克名字上方提供了足够的信息：来自你的炮塔的防护和状态效果免疫。如果对应的装备改造已装备并且你正在尝试应用此状态效果。若你需要更多信息，需要打开TAB窗口，找到玩家，并查看所有其他信息。<p><br>
</p>
</td></tr>
<tr>
<td>58</td>
<td>你打算什么时候发布带有炸弹车的新游戏模式？</td>
<td>上次有人问我关于增加一个新的匹配游戏模式时，我记得我回答过，我们只能再增加一个游戏模式，那就是有炸弹车的游戏模式。让我解释一下：有一个物体沿着地图移动，一个团队需要推动它，而另一个团队则应该阻止他们。为了让这个游戏模式有趣，我们需要为这个模式创建特殊地图。应该有起点、路径和终点。为此需要做大量工作，但我们还没有开始开发。实际上，它还不在规划阶段；它仅仅在待办事项中。但总有一天……<p><br>
</p>
</td></tr>
<tr>
<td>59</td>
<td>我如何在移动版本中输入促销代码？</td>
<td>不幸的是，目前游戏的移动版本中没有这样的选项，但我们正在更新其界面，因此将会添加此功能。<p><br>
</p>
</td></tr>
<tr>
<td>60</td>
<td>你会给奖励（例如幸运礼盒、星级挑战、礼物等）添加即时或部分升级吗？它们的作用就像皇室战争中的小丑卡一样。</td>
<td>我们有一个不同的升级系统。他们的价格和所需时间取决于你已经升级的物品程度。因此，我们无法添加这张小丑牌的完整模拟副本。<p><br>
</p>
</td></tr>
<tr>
<td>62</td>
<td>你会更新TO手机的界面吗？</td>
<td>是的，我们正在处理这件事。<p><br>
</p>
</td></tr>
<tr>
<td>63</td>
<td>底盘上会有动态悬挂吗？</td>
<td>我们已经在新的 HD 底盘皮肤上实现了这一功能，但此功能目前尚未启用。我们正在努力实现“骨骼动画”技术，从而使该功能可以被激活。<p><br>
</p>
</td></tr>
<tr>
<td>64</td>
<td>你打算恢复那个试驾功能吗？它可以让你用物品装备进行一次战斗，这样你可以在购买前体验一下。</td>
<td>不。<p><br>
</p>
</td></tr>
<tr>
<td>65</td>
<td>你打算在每周任务礼盒中添加更多坦克币吗？</td>
<td>我们没有这样的计划。<p><br>
</p>
</td></tr>
<tr>
<td>66</td>
<td>在不久的未来世界里，会有更多黄蜂轻甲和火焰炮特殊模式吗？</td>
<td>当然！你喜欢它，对吧？<p><br>
</p>
</td></tr>
<tr>
<td>67</td>
<td>你是否计划添加一个游戏内选项，允许军团队长更改他们军团的名称和标记？</td>
<td>是的，我们确实有这样的计划。此外，增加一个选项来更换军团队长并增加军团中的玩家数量也是一个不错的主意。<p><br>
</p>
</td></tr>
<tr>
<td>68</td>
<td>你注意到那些在每个活动中变得更加明显的延迟吗？你会采取措施吗？</td>
<td>是的，我们的团队已经注意到这些问题，并且我们正在努力修复它们。<p><br>
</p>
</td></tr>
<tr>
<td>69</td>
<td>你为什么要更改升级系统？</td>
<td>以前的系统太难理解，而且我们同时有两个系统。我们决定通过合并它们，让新玩家更容易理解。<p><br>
</p>
</td></tr>
<tr>
<td>70</td>
<td>请问您能否添加一个功能，可以保存您的账号并快速切换，就像游戏的Flash版本一样？</td>
<td>我们在游戏的 Flash 版本中有这样的功能，而这就是我们还没有在 HTML5 版本中实现它的原因。我们以为内置浏览器保存密码的功能就足够了。但是对于使用可下载客户端进行游戏的玩家，这个选项不可用。我们想要添加这样的功能，但有一些原因让这并不容易。如您所知，3D坦克可以在 Steam 等平台上使用，在这些平台上，您只能将一个游戏内账号绑定到平台账号。这对我们的游戏不好，因为几乎每个人至少拥有多个游戏账号。我们有一个解决这个问题的想法。在许多游戏中，你会有一个用于进入游戏的登录账号，进入后，你可以选择想要使用哪个账号进行游戏。就像在角色扮演游戏中，你可以在不同的角色之间切换，甚至切换服务器。我们想实现这个功能，这将成为这个问题的解决方案，而且将不再需要实现保存密码的系统。<p><br>
</p>
</td></tr>
<tr>
<td>268</td>
<td>“3D坦克 Classic” 项目上线后计划如何支持？</td>
<td>支持将非常有限。主要任务是支持服务器稳定性并修复暴击问题。<p><br>
</p>
</td></tr>
<tr>
<td>269</td>
<td>是否计划组建一个单独的团队来专门处理经典版本？</td>
<td>该项目将由现有开发团队支持。由于 Classic 不需要新的功能，对独立团队的需求非常低。<p><br>
</p>
</td></tr>
<tr>
<td>270</td>
<td>预计上线时的在线玩家人数是多少？</td>
<td>一些玩家预计在线人数在 30–50k，但开发者的预期较低。<p><br>
</p>
</td></tr>
<tr>
<td>271</td>
<td>会有过速装置吗？</td>
<td>是的，会有过速装置。但与3D坦克不同，它们只有三种，并且会根据皮肤而不是底盘有所不同。此外，它们充能需要相当长的时间，因为在经典模式中，一场普通战斗明显会耗费更多时间。对于标准和遗产皮肤，你可以期待一个提供所有道具的过速装置；XT皮肤的过速装置将是能够禁用所有道具的电磁脉冲（类似猎人中甲那样，但不会造成眩晕）；最后，珍奇青春皮肤将有一个反冲器过速装置，能够像剑圣一样推动周围的坦克。我们添加过速装置的原因与炮塔皮肤包含装备改造的原因相同——就是为了给底盘皮肤增加一些独特性。我们也清楚，经典坦克的过速装置中哪些是“危险”的新增内容。这就是为什么在封闭测试期间，我们会观察它，以确保这些过速装置的启动频率不会造成所有玩家道具满载的情况。当然，在创建战斗时，你将有能力关闭过速装置，所以一切由你决定。</td></tr></tbody><tfoot></tfoot></table></div></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
        m[i] = m[i] || function () {
            (m[i].a = m[i].a || []).push(arguments)
        };
        m[i].l = 1 * new Date();
        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(17294416, "init", {
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
        trackHash: true
    });
</script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="https://tankionline.com/ru/wp-content/plugins/ag-custom-blocks/build/blocks.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/common.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/supportForm.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/sliders.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/paints.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/headerAnimation.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/maps.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/modals.js"></script>
    <script src="https://en.tankiwiki.com/skins/TankiBlue/resources/scripts/upgradesCalculator.js"></script>
    <script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":311,"wgPageParseReport":{"limitreport":{"cputime":"0.027","walltime":"0.030","ppvisitednodes":{"value":303,"limit":1000000},"postexpandincludesize":{"value":21961,"limit":2097152},"templateargumentsize":{"value":21475,"limit":2097152},"expansiondepth":{"value":5,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%   12.525      1 Template:QATable","100.00%   12.525      1 -total"," 48.87%    6.121     27 Template:QARow"]},"cachereport":{"timestamp":"20251103201811","ttl":86400,"transientcontent":false}}});});</script>
    
    <script>
    // 客户端颜色替换逻辑
    function replaceColorsInDom() {
        // 定义替换规则
        const replacements = [
            { from: /#?46DF11|rgb\(70,\s*223,\s*17\)/gi, to: '#76FF33' },
            { from: /#?00D7FF/gi, to: '#00D4FF' },
            { from: /#?(F86667|F33|FF3333)\b/gi, to: '#FF6666' },
            { from: /#?(FC0|FFCC00)\b/gi, to: '#FFEE00' },
            { from: /#?8C60EB/gi, to: '#D580FF' }
        ];

        // 辅助函数，应用所有替换规则
        function applyReplacements(text) {
            if (!text) return text;
            let newText = text;
            for (const rule of replacements) {
                newText = newText.replace(rule.from, rule.to);
            }
            return newText;
        }

        // 1. 替换所有元素的内联样式 (style attribute)
        document.querySelectorAll('[style]').forEach(el => {
            const originalStyle = el.getAttribute('style');
            const newStyle = applyReplacements(originalStyle);
            if (newStyle !== originalStyle) {
                el.setAttribute('style', newStyle);
            }
        });

        // 2. 替换页面内 <style> 标签中的样式规则
        document.querySelectorAll('style').forEach(styleTag => {
            const originalCss = styleTag.innerHTML;
            const newCss = applyReplacements(originalCss);
            if (newCss !== originalCss) {
                styleTag.innerHTML = newCss;
            }
        });
    }

    // 在DOM加载完成后立即执行，以尽量减少颜色闪烁
    document.addEventListener('DOMContentLoaded', replaceColorsInDom);
    </script>
    
    
    <script>
    // Bilibili 弹窗逻辑 (V4 - 精确复刻)
    document.addEventListener('DOMContentLoaded', function() {
        const videoPopups = document.querySelectorAll('.ShowYouTubePopup');
        if (videoPopups.length) {
            let modal = null;
            videoPopups.forEach(popup => {
                if (popup.dataset.biliHandled) return;
                
                popup.addEventListener('click', (event) => {
                    event.stopImmediatePropagation(); 

                    if (typeof tingle === 'undefined') {
                        console.error('Tingle.js 未加载，无法打开视频弹窗。');
                        return;
                    }
                    showBilibiliModal(popup.dataset.id);
                }, true);

                popup.dataset.biliHandled = 'true';
            });

            function showBilibiliModal(bvid) {
                modal = new tingle.modal({
                    closeMethods: ['button', 'escape', 'overlay']
                });
                modal.setContent(`
                        <div class="report-head">
                            <div class="report-title">观看视频</div>
                            <div class="report-stripes"></div>
                            <div class="report-close"></div>
                        </div>
                        
                        <div style="margin: 15px 10px 10px 10px; background: url('loading.gif') center no-repeat;">
                            <iframe class="yt-video" width="640px" height="360px"
                                src="https://player.bilibili.com/player.html?bvid=${bvid}" 
                                frameborder="0" 
                                allowfullscreen="allowfullscreen"
                                sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts">
                            </iframe>
                        </div>
                    `);
                modal.open();

                const closeButton = modal.getContent().querySelector('.report-close');
                closeButton.addEventListener('click', () => modal.close());

                const tingleClose = modal.modal.querySelector('.tingle-modal__close');
                if (tingleClose) tingleClose.remove();
            }
        }
    });
    </script>
    </body></html>